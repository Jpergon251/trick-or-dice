[gd_scene load_steps=10 format=3 uid="uid://ccl3cru58fcbq"]

[ext_resource type="Script" uid="uid://bdmb540n00pp" path="res://scripts/hud/hud.gd" id="1_c0cnr"]
[ext_resource type="Script" uid="uid://m4a5vicpcqrl" path="res://scripts/hud/fireball_attack.gd" id="2_epp0c"]
[ext_resource type="Texture2D" uid="uid://ceko0uud2jqh4" path="res://assets/sprites/D20_icon.png" id="2_glunx"]
[ext_resource type="Texture2D" uid="uid://n6lptsh5x6b" path="res://assets/sprites/FireballIcon.png" id="2_jjobl"]

[sub_resource type="Theme" id="Theme_jjobl"]

[sub_resource type="LabelSettings" id="LabelSettings_epp0c"]
font_size = 14

[sub_resource type="Animation" id="Animation_epp0c"]
resource_name = "RollDice"
length = 0.33
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("CanvasLayer/DiceRollPanel/Dice:rotation")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.33),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [0.0, 6.2831855]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("CanvasLayer/DiceRollPanel/Dice/DiceNumber:visible")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.33),
"transitions": PackedFloat32Array(1, 1),
"update": 1,
"values": [false, true]
}

[sub_resource type="Animation" id="Animation_r7rnh"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("CanvasLayer/DiceRollPanel/Dice:rotation")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [0.0]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("CanvasLayer/DiceRollPanel/Dice/DiceNumber:visible")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [true]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_j3gwx"]
_data = {
&"RESET": SubResource("Animation_r7rnh"),
&"RollDice": SubResource("Animation_epp0c")
}

[node name="Control" type="Control"]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 1
script = ExtResource("1_c0cnr")

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="ProgressBar" type="ProgressBar" parent="CanvasLayer"]
anchors_preset = -1
anchor_left = 0.326
anchor_top = 0.915
anchor_right = 0.63500005
anchor_bottom = 0.96500003
offset_left = -0.55200195
offset_top = 0.079956055
offset_right = -0.52008057
offset_bottom = -0.32000732
grow_horizontal = 2
grow_vertical = 0
size_flags_horizontal = 4
size_flags_vertical = 4
step = 1.0
fill_mode = 1
show_percentage = false

[node name="HealthLabel" type="Label" parent="CanvasLayer/ProgressBar"]
layout_mode = 1
anchors_preset = -1
anchor_top = -1.1600001
anchor_right = 1.0
anchor_bottom = -0.24000001
text = "Life"

[node name="EnemySelectedPanel" type="Panel" parent="CanvasLayer"]
anchors_preset = -1
anchor_left = 0.043
anchor_top = 0.80200005
anchor_right = 0.21700001
anchor_bottom = 0.957
offset_left = 0.4639969
offset_top = 5.303955
offset_right = 0.015991211
offset_bottom = 4.8640137

[node name="EnemySelectedLabel" type="Label" parent="CanvasLayer/EnemySelectedPanel"]
layout_mode = 1
anchors_preset = -1
anchor_top = -0.23
anchor_right = 1.0
text = "Enemy Selected:"

[node name="HBoxContainer" type="HBoxContainer" parent="CanvasLayer/EnemySelectedPanel"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="EnemyIcon" type="TextureRect" parent="CanvasLayer/EnemySelectedPanel/HBoxContainer"]
layout_mode = 2
size_flags_horizontal = 3
expand_mode = 2

[node name="AttacksList" type="VBoxContainer" parent="CanvasLayer/EnemySelectedPanel/HBoxContainer"]
layout_mode = 2
size_flags_horizontal = 3

[node name="FireballAttack" type="HBoxContainer" parent="CanvasLayer/EnemySelectedPanel/HBoxContainer/AttacksList"]
layout_mode = 2
theme = SubResource("Theme_jjobl")
script = ExtResource("2_epp0c")

[node name="AttackIcon" type="TextureRect" parent="CanvasLayer/EnemySelectedPanel/HBoxContainer/AttacksList/FireballAttack"]
layout_mode = 2
size_flags_horizontal = 3
texture = ExtResource("2_jjobl")
expand_mode = 4

[node name="AttackNameLabel" type="Label" parent="CanvasLayer/EnemySelectedPanel/HBoxContainer/AttacksList/FireballAttack"]
layout_mode = 2
text = "Fireball"

[node name="DiceRollPanel" type="Panel" parent="CanvasLayer"]
anchors_preset = -1
anchor_left = 0.712
anchor_top = 0.77800006
anchor_right = 0.9480001
anchor_bottom = 0.97200006
offset_left = -0.22399902
offset_top = -0.14404297
offset_right = -0.096069336
offset_bottom = 0.14398193
grow_horizontal = 0
grow_vertical = 0

[node name="RollButton" type="Button" parent="CanvasLayer/DiceRollPanel"]
layout_mode = 1
anchors_preset = -1
anchor_left = 0.5
anchor_top = 0.71400005
anchor_right = 0.97800004
anchor_bottom = 0.96000004
offset_top = 0.036010742
offset_right = -0.016021729
offset_bottom = 0.040008545
text = "Roll Dice"

[node name="AttackNameDiceLabel" type="Label" parent="CanvasLayer/DiceRollPanel"]
layout_mode = 1
anchors_preset = -1
anchor_left = 0.026
anchor_top = 0.032
anchor_right = 0.48900002
anchor_bottom = 0.24000001
offset_left = -0.07200003
offset_top = -0.032000065
offset_right = -0.008010864
offset_bottom = 0.013998032
text = "Attack Selected:"

[node name="Dice" type="TextureRect" parent="CanvasLayer/DiceRollPanel"]
layout_mode = 1
anchors_preset = -1
anchor_left = 0.58500004
anchor_top = 0.008
anchor_right = 0.90400004
anchor_bottom = 0.698
offset_left = -0.120010376
offset_top = -0.008000016
offset_right = -1.8880157
offset_bottom = -1.947998
pivot_offset = Vector2(42.5, 42.5)
texture = ExtResource("2_glunx")
expand_mode = 1

[node name="DiceNumber" type="Label" parent="CanvasLayer/DiceRollPanel/Dice"]
layout_mode = 1
anchors_preset = -1
anchor_left = 0.388
anchor_top = 0.388
anchor_right = 0.624
anchor_bottom = 0.624
offset_left = 0.020008087
offset_top = 0.019996643
offset_right = -0.039993286
offset_bottom = -0.04000473
text = "1"
label_settings = SubResource("LabelSettings_epp0c")
horizontal_alignment = 1

[node name="AttackIconDice" type="TextureRect" parent="CanvasLayer/DiceRollPanel"]
layout_mode = 1
anchors_preset = -1
anchor_left = 0.11000001
anchor_top = 0.317
anchor_right = 0.36800003
anchor_bottom = 0.873
offset_left = 0.07999802
offset_top = 0.057998657
offset_right = -0.0960083
offset_bottom = 0.0019989014
expand_mode = 4

[node name="HUDAnimationPlayer" type="AnimationPlayer" parent="."]
libraries = {
&"": SubResource("AnimationLibrary_j3gwx")
}

[connection signal="gui_input" from="CanvasLayer/EnemySelectedPanel/HBoxContainer/AttacksList/FireballAttack" to="." method="_on_fireball_attack_gui_input"]
[connection signal="pressed" from="CanvasLayer/DiceRollPanel/RollButton" to="." method="_on_roll_button_pressed"]
